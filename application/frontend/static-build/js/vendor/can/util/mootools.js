define(["can/util/can","mootools","can/util/event","can/util/fragment","can/util/deferred","can/util/array/each","can/util/object/isplain"],function(t){t.trim=function(t){return t&&t.trim()};var e=function(){var e,n,r,i,o,s,a=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},u=2),"object"==typeof a||t.isFunction(a)||(a={}),l===u&&(a=this,--u);l>u;u++)if(null!=(e=arguments[u]))for(n in e)r=a[n],i=e[n],a!==i&&(c&&i&&(t.isPlainObject(i)||(o=t.isArray(i)))?(o?(o=!1,s=r&&t.isArray(r)?r:[]):s=r&&t.isPlainObject(r)?r:{},a[n]=t.extend(c,s,i)):void 0!==i&&(a[n]=i));return a};t.extend=e,t.makeArray=function(t){if(null==t)return[];try{return Type.isEnumerable(t)&&"string"!=typeof t?Array.prototype.slice.call(t):[t]}catch(e){var n,r=[];for(n=0;n<t.length;++n)r.push(t[n]);return r}},t.isArray=function(t){return"array"===typeOf(t)},t.inArray=function(t,e){return e?Array.prototype.indexOf.call(e,t):-1},t.map=function(t,e){return Array.from(t||[]).map(e)},t.param=function(t){return Object.toQueryString(t)},t.isEmptyObject=function(t){return 0===Object.keys(t).length},t.proxy=function(e){var n=t.makeArray(arguments),e=n.shift();return e.bind.apply(e,n)},t.isFunction=function(t){return"function"==typeOf(t)},t.bind=function(e,n){return this.bind&&this.bind!==t.bind?this.bind(e,n):this.addEvent?this.addEvent(e,n):this.nodeName&&1==this.nodeType?$(this).addEvent(e,n):t.addEvent.call(this,e,n),this},t.unbind=function(e,n){return this.unbind&&this.unbind!==t.unbind?this.unbind(e,n):this.removeEvent&&this.removeEvent(e,n),this.nodeName&&1==this.nodeType?$(this).removeEvent(e,n):t.removeEvent.call(this,e,n),this},t.trigger=function(e,n,r,i){if(i=void 0===i?!0:i,r=r||[],e.fireEvent)for(e=e[0]||e;e;){n.type||(n={type:n,target:e});var o=e!==window?t.$(e).retrieve("events")[0]:e.retrieve("events");o&&o[n.type]&&o[n.type].keys.each(function(t){t.apply(this,[n].concat(r))},this),e=i&&e.parentNode?e.parentNode:null}else"string"==typeof n&&(n={type:n}),n.target=n.target||e,n.data=r,t.dispatch.call(e,n)},t.delegate=function(t,e,n){return this.delegate?this.delegate(t,e,n):this.addEvent&&this.addEvent(e+":relay("+t+")",n),this},t.undelegate=function(t,e,n){return this.undelegate?this.undelegate(t,e,n):this.removeEvent&&this.removeEvent(e+":relay("+t+")",n),this};var n={type:"method",success:void 0,error:void 0},r=function(t,e){for(var n in t)e[n]="function"==typeof e[n]?function(){t[n].apply(t,arguments)}:n[t]};t.ajax=function(e){var i,o=t.Deferred(),s=t.extend({},e);for(var a in n)void 0!==s[a]&&(s[n[a]]=s[a],delete s[a]);s.method=s.method||"get",s.url=s.url.toString();var u=e.onSuccess||e.success,l=e.onFailure||e.error;return s.onSuccess=function(t){var e=t;r(i.xhr,o),o.resolve(e,"success",i.xhr),u&&u(e,"success",i.xhr)},s.onFailure=function(){r(i.xhr,o),o.reject(i.xhr,"error"),l&&l(i.xhr,"error")},i="json"===e.dataType?new Request.JSON(s):new Request(s),i.send(),r(i.xhr,o),o},t.$=function(t){return t===window?window:$$(t)};var i=document.id;document.id=function(t){return t&&11===t.nodeType?t:i.apply(document,arguments)},t.append=function(e,n){return"string"==typeof n&&(n=t.buildFragment(n)),e.grab(n)},t.filter=function(t,e){return t.filter(e)},t.data=function(t,e,n){return void 0===n?t[0].retrieve(e):t.store(e,n)},t.addClass=function(t,e){return t.addClass(e)},t.remove=function(t){var e=t.filter(function(t){return 1===t.nodeType?!0:(t.parentNode.removeChild(t),void 0)});return e.destroy(),e};var o=Element.prototype.destroy;Element.implement({destroy:function(){t.trigger(this,"destroyed",[],!1);for(var e,n=this.getElementsByTagName("*"),r=0;void 0!==(e=n[r]);r++)t.trigger(e,"destroyed",[],!1);o.apply(this,arguments)}}),t.get=function(t,e){return t[e]};var s=Slick.uidOf;return Slick.uidOf=function(t){return 1===t.nodeType||t===window||t.document===document?s(t):Math.random()},t});