define(["can/util/can","zepto","can/util/object/isplain","can/util/event","can/util/fragment","can/util/deferred","can/util/array/each"],function(t){function e(t,e){var s=t[a],u=s&&i[s];return void 0===e?u||n(t):u&&u[e]||o.call(r(t),e)}function n(t,e,n){var r=t[a]||(t[a]=++s),o=i[r]||(i[r]={});return void 0!==e&&(o[e]=n),o}var r=Zepto,i={},o=r.fn.data,s=r.uuid=+new Date,a=r.expando="Zepto"+s;r.fn.data=function(t,i){return void 0===i?0==this.length?void 0:e(this[0],t):this.each(function(o){n(this,t,r.isFunction(i)?i.call(this,o,e(this,t)):i)})},r.cleanData=function(e){for(var n,r=0;void 0!==(n=e[r]);r++){t.trigger(n,"destroyed",[],!1);var o=n[a];delete i[o]}};var u=t.each;r.extend(t,Zepto),t.each=u;var l=function(t,e){return t[0]&&t[0][e]||t[e]};t.trigger=function(e,n,i,o){e.trigger?e.trigger(n,i):l(e,"dispatchEvent")?o===!1?r([e]).triggerHandler(n,i):r([e]).trigger(n,i):("string"==typeof n&&(n={type:n}),n.target=n.target||e,n.data=i,t.dispatch.call(e,n))},t.$=Zepto,t.bind=function(e,n){return this.bind?this.bind(e,n):l(this,"addEventListener")?r([this]).bind(e,n):t.addEvent.call(this,e,n),this},t.unbind=function(e,n){return this.unbind?this.unbind(e,n):l(this,"addEventListener")?r([this]).unbind(e,n):t.removeEvent.call(this,e,n),this},t.delegate=function(t,e,n){this.delegate?this.delegate(t,e,n):r([this]).delegate(t,e,n)},t.undelegate=function(t,e,n){this.undelegate?this.undelegate(t,e,n):r([this]).undelegate(t,e,n)},r.each(["append","filter","addClass","remove","data"],function(e,n){t[n]=function(e){return e[n].apply(e,t.makeArray(arguments).slice(1))}}),t.makeArray=function(e){var n=[];return t.each(e,function(t,e){n[e]=t}),n},t.proxy=function(t,e){return function(){return t.apply(e,arguments)}};var c=r.ajaxSettings.xhr;r.ajaxSettings.xhr=function(){var t=c(),e=t.open;return t.open=function(t,n){e.call(this,t,n,void 0===f?!0:f)},t};var f,d=r.ajax,p=function(t,e){for(var n in t)e[n]="function"==typeof e[n]?function(){t[n].apply(t,arguments)}:n[t]};return t.ajax=function(e){var n=e.success,r=e.error,i=t.Deferred();e.success=function(t){p(o,i),i.resolve.call(i,t),n&&n.apply(this,arguments)},e.error=function(){p(o,i),i.reject.apply(i,arguments),r&&r.apply(this,arguments)},e.async===!1&&(f=!1);var o=d(e);return f=void 0,p(o,i),i},r.fn.empty=function(){return this.each(function(){r.cleanData(this.getElementsByTagName("*")),this.innerHTML=""})},r.fn.remove=function(){return r.cleanData(this),this.each(function(){null!=this.parentNode&&(this.getElementsByTagName&&r.cleanData(this.getElementsByTagName("*")),this.parentNode.removeChild(this))}),this},t.trim=function(t){return t.trim()},t.isEmptyObject=function(t){var e;for(e in t);return void 0===e},t.extend=function(e){if(e===!0){var n=t.makeArray(arguments);return n.shift(),r.extend.apply(r,n)}return r.extend.apply(r,arguments)},t.get=function(t,e){return t[e]},t});