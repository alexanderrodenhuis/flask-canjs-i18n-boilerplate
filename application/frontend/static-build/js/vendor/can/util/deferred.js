/*!
 * CanJS - 2.0.5
 * http://canjs.us/
 * Copyright (c) 2014 Bitovi
 * Tue, 04 Feb 2014 22:36:26 GMT
 * Licensed MIT
 * Includes: CanJS default build
 * Download from: http://canjs.us/
 */

define(["can/util/can"],function(t){var e=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},n=function(t){return this instanceof n?(this._doneFuncs=[],this._failFuncs=[],this._resultArgs=null,this._status="",t&&t.call(this,this),void 0):new n};t.Deferred=n,t.when=n.when=function(){var e=t.makeArray(arguments);if(e.length<2){var i=e[0];return i&&t.isFunction(i.isResolved)&&t.isFunction(i.isRejected)?i:n().resolve(i)}var r=n(),o=0,a=[];return t.each(e,function(t,n){t.done(function(){a[n]=arguments.length<2?arguments[0]:arguments,++o===e.length&&r.resolve.apply(r,a)}).fail(function(){r.reject(1===arguments.length?arguments[0]:arguments)})}),r};var i=function(t,e){return function(n){var i=this._resultArgs=arguments.length>1?arguments[1]:[];return this.exec(n,this[t],i,e)}},r=function o(e,n){return function(){var i=this;return t.each(Array.prototype.slice.call(arguments),function(t){t&&(t.constructor===Array?o.apply(i,t):(i._status===n&&t.apply(i,i._resultArgs||[]),i[e].push(t)))}),this}};return e(n.prototype,{pipe:function(e,n){var i=t.Deferred();return this.done(function(){i.resolve(e.apply(this,arguments))}),this.fail(function(){n?i.reject(n.apply(this,arguments)):i.reject.apply(i,arguments)}),i},resolveWith:i("_doneFuncs","rs"),rejectWith:i("_failFuncs","rj"),done:r("_doneFuncs","rs"),fail:r("_failFuncs","rj"),always:function(){var e=t.makeArray(arguments);return e.length&&e[0]&&this.done(e[0]).fail(e[0]),this},then:function(){var e=t.makeArray(arguments);return e.length>1&&e[1]&&this.fail(e[1]),e.length&&e[0]&&this.done(e[0]),this},state:function(){switch(this._status){case"rs":return"resolved";case"rj":return"rejected";default:return"pending"}},isResolved:function(){return"rs"===this._status},isRejected:function(){return"rj"===this._status},reject:function(){return this.rejectWith(this,arguments)},resolve:function(){return this.resolveWith(this,arguments)},exec:function(e,n,i,r){return""!==this._status?this:(this._status=r,t.each(n,function(t){"function"==typeof t.apply&&t.apply(e,i)}),this)}}),t});