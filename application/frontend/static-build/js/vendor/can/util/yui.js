/*!
 * CanJS - 2.0.5
 * http://canjs.us/
 * Copyright (c) 2014 Bitovi
 * Tue, 04 Feb 2014 22:36:26 GMT
 * Licensed MIT
 * Includes: CanJS default build
 * Download from: http://canjs.us/
 */

define(["can/util/can","yui","can/util/event","can/util/fragment","can/util/array/each","can/util/object/isplain","can/util/deferred","can/util/hashchange","can/util/inserted"],function(can){var leaveRe=/mouse(enter|leave)/,_fix=function(t,e){return"mouse"+("enter"===e?"over":"out")},realTrigger,realTriggerHandler=function(t,e,n){var r,i=Y.Node(t),o=can.Y.Event.getListeners(i._yuid,e);if(o)for(r=0;r<o.length;r++)if(o[r].fire)o[r].fire(n);else{if(!o[r].handles)throw"can not fire event";can.each(o[r].handles,function(t){t.evt.fire(n)})}};realTrigger=document.createEvent?function(t,e,n){var r=document.createEvent("HTMLEvents");e=e.replace(leaveRe,_fix),r.initEvent(e,"removed"===e||"inserted"===e?!1:!0,!0),n&&can.extend(r,n),t.dispatchEvent(r)}:function(t,e,n){var r="on"+e,i=!1;try{var o=document.createEventObject();("inserted"===e||"removed"===e)&&(o.cancelBubble=!0),can.extend(o,n),t.fireEvent(r,o)}catch(a){var s=can.extend({type:e,target:t,faux:!0,_stopper:function(){i=this.cancelBubble},stopPropagation:function(){i=this.cancelBubble}},n);if(realTriggerHandler(t,e,s),"inserted"===e||"removed"===e)return;for(;!i&&t!==document&&t.parentNode;)t=t.parentNode,realTriggerHandler(t,e,s)}},YUI.add("can-modifications",function(t){var e=t.DOM.addHTML;t.DOM.addHTML=function(t,n,r){("string"==typeof n||"number"==typeof n)&&(n=can.buildFragment(n));var i;i=11===n.nodeType?can.makeArray(n.childNodes):[n];var o=e.call(this,t,n,r);return can.inserted(i),o}},"3.7.3",{requires:["node-base"]});var Y=can.Y=can.Y||YUI().use("*");can.trim=function(t){return Y.Lang.trim(t)},can.makeArray=function(t){return t?Y.Array(t):[]},can.isArray=Y.Lang.isArray,can.inArray=function(t,e,n){return e?Y.Array.indexOf(e,t,n):-1},can.map=function(t,e){return Y.Array.map(can.makeArray(t||[]),e)},can.extend=function(t){for(var e,n=t===!0?1:0,r=arguments[n],i=n+1;e=arguments[i];i++)Y.mix(r,e,!0,null,null,!!n);return r},can.param=function(t){return Y.QueryString.stringify(t,{arrayKey:!0})},can.isEmptyObject=function(t){return Y.Object.isEmpty(t)},can.proxy=function(){return Y.bind.apply(Y,arguments)},can.isFunction=function(t){return Y.Lang.isFunction(t)};var prepareNodeList=function(t){return t.each(function(e,n){t[n]=e.getDOMNode()}),t.length=t.size(),t};can.$=function(t){return t===window?window:t instanceof Y.NodeList?prepareNodeList(t):"object"!=typeof t||can.isArray(t)||"undefined"!=typeof t.nodeType||t.getDOMNode?prepareNodeList(Y.all(t)):new Y.NodeList(t)},can.get=function(t,e){return t._nodes[e]},can.append=function(t,e){t.each(function(t){"string"==typeof e&&(e=can.buildFragment(e,t)),t.append(e)})},can.addClass=function(t,e){return t.addClass(e)},can.data=function(t,e,n){return void 0===n?t.item(0).getData(e):t.item(0).setData(e,n)},can.remove=function(t){return t.remove()&&t.destroy()},can.has=function(t,e){return Y.DOM.contains(t[0],e)?t:[]},can._yNodeRemove=can._yNodeRemove||Y.Node.prototype.remove,Y.Node.prototype.remove=function(){var t=this.getDOMNode();if(1===t.nodeType){can.trigger(this,"removed",[],!1);for(var e,n=t.getElementsByTagName("*"),r=0;void 0!==(e=n[r]);r++)can.trigger(e,"removed",[],!1)}can._yNodeRemove.apply(this,arguments)},Y.NodeList.addMethod("remove",Y.Node.prototype.remove);var optionsMap={type:"method",success:void 0,error:void 0},updateDeferred=function(t,e){if(t&&t.io){var n=t.io;for(var r in n)e[r]="function"==typeof e[r]?function(){n[r].apply(n,arguments)}:r[n]}};can.ajax=function(options){var d=can.Deferred(),requestOptions=can.extend({},options);for(var option in optionsMap)void 0!==requestOptions[option]&&(requestOptions[optionsMap[option]]=requestOptions[option],delete requestOptions[option]);requestOptions.sync=!options.async;var success=options.success,error=options.error;requestOptions.on={success:function(transactionid,response){var data=response.responseText;"json"===options.dataType&&(data=eval("("+data+")")),updateDeferred(request,d),d.resolve(data),success&&success(data,"success",request)},failure:function(){updateDeferred(request,d),d.reject(request,"error"),error&&error(request,"error")}};var request=Y.io(requestOptions.url,requestOptions);return updateDeferred(request,d),d};var yuiEventId=0,addBinding=function(t,e,n,r){if(t instanceof Y.NodeList||!t.on||t.getDOMNode)t.each(function(t){t=can.$(t);var i=can.data(t,"events"),o=n+":"+e;i||can.data(t,"events",i={}),i[o]||(i[o]={}),void 0===r.__bindingsIds&&(r.__bindingsIds=yuiEventId++),i[o][r.__bindingsIds]=e?t.item(0).delegate(n,r,e):t.item(0).on(n,r)});else{var i=t,o=i.__canEvents=i.__canEvents||{};o[n]||(o[n]={}),void 0===r.__bindingsIds&&(r.__bindingsIds=yuiEventId++),o[n][r.__bindingsIds]=i.on(n,r)}},removeBinding=function(t,e,n,r){if(t instanceof Y.NodeList||!t.on||t.getDOMNode)t.each(function(t){t=can.$(t);var i=can.data(t,"events");if(i){var o=n+":"+e,a=i[o],s=a[r.__bindingsIds];s.detach(),delete a[r.__bindingsIds],can.isEmptyObject(a)&&delete i[n],can.isEmptyObject(i)}});else{var i=t,o=i.__canEvents||{},a=o[n],s=a[r.__bindingsIds];s.detach(),delete a[r.__bindingsIds],can.isEmptyObject(a)&&delete o[n],can.isEmptyObject(o)}};return can.bind=function(t,e){return this.bind&&this.bind!==can.bind?this.bind(t,e):this.on||this.nodeType?addBinding(can.$(this),void 0,t,e):this.addEvent?this.addEvent(t,e):can.addEvent.call(this,t,e),this},can.unbind=function(t,e){return this.unbind&&this.unbind!==can.unbind?this.unbind(t,e):this.on||this.nodeType?removeBinding(can.$(this),void 0,t,e):can.removeEvent.call(this,t,e),this},can.on=can.bind,can.off=can.unbind,can.trigger=function(t,e,n,r){t instanceof Y.NodeList&&(t=t.item(0)),t.getDOMNode&&(t=t.getDOMNode()),t.nodeName?(t=Y.Node(t),r===!1&&t.once(e,function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t._stopper&&t._stopper()}),"string"!=typeof e&&(n=e,e=n.type,delete n.type),realTrigger(t.getDOMNode(),e,n||{})):("string"==typeof e&&(e={type:e}),e.target=e.target||t,can.dispatch.call(t,e,n))},Y.mix(Y.Node.DOM_EVENTS,{removed:!0,inserted:!0,foo:!0}),can.delegate=function(t,e,n){return this.on||this.nodeType?addBinding(can.$(this),t,e,n):this.delegate&&this.delegate(t,e,n),this},can.undelegate=function(t,e,n){return this.on||this.nodeType?removeBinding(can.$(this),t,e,n):this.undelegate&&this.undelegate(t,e,n),this},can});