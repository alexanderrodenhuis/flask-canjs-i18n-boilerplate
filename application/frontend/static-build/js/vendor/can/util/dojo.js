/*!
 * CanJS - 2.0.0
 * http://canjs.us/
 * Copyright (c) 2013 Bitovi
 * Wed, 16 Oct 2013 20:40:41 GMT
 * Licensed MIT
 * Includes: CanJS default build
 * Download from: http://canjs.us/
 */

define(["can/util/can","dojo","can/util/event","can/util/fragment","can/util/array/each","can/util/object/isplain","can/util/deferred","can/util/hashchange","can/util/inserted"],function(t){function e(t,e){var r=t[l],i=r&&s[r];return void 0===e?i||n(t):i&&i[e]}function n(t,e,n){var r=t[l]||(t[l]=++u),i=s[r]||(s[r]={});return void 0!==e&&(i[e]=n),i}define("plugd/trigger",["dojo"],function(t){var e=t,n=e.isFunction,r=/mouse(enter|leave)/,i=function(t,e){return"mouse"+("enter"==e?"over":"out")},o=e._mixin,a=e.doc.createEvent?function(t,n,a){var s=e.doc.createEvent("HTMLEvents");n=n.replace(r,i),s.initEvent(n,"removed"===n||"inserted"===n?!1:!0,!0),a&&o(s,a),t.dispatchEvent(s)}:function(t,r,i){var a="on"+r,s=!1;r.toLowerCase();try{t.fireEvent(a)}catch(u){var l=o({type:r,target:t,faux:!0,_stopper:function(){s=this.cancelBubble}},i);for(n(t[a])&&t[a](l);!s&&t!==e.doc&&t.parentNode;)t=t.parentNode,n(t[a])&&t[a](l)}};return e._trigger=function(t,n,r){"string"!=typeof n&&(r=n,n=r.type,delete r.type);var i=e.byId(t),o=n&&"on"==n.slice(0,2)?n.slice(2):n;a(i,o,r)},e.trigger=function(t,r){return n(t)||n(r)||n(t[r])?e.hitch.apply(e,arguments)():e._trigger.apply(e,arguments)},e.NodeList.prototype.trigger=e.NodeList._adaptAsForEach(e._trigger),e._Node&&!e._Node.prototype.trigger&&e.extend(e._Node,{trigger:function(t,n){return e._trigger(this,t,n),this}}),e.trigger}),require(["dojo","dojo/query","plugd/trigger","dojo/NodeList-dom"]),t.trim=function(t){return t&&dojo.trim(t)},t.makeArray=function(t){var e=[];return dojo.forEach(t,function(t){e.push(t)}),e},t.isArray=dojo.isArray,t.inArray=function(t,e){return dojo.indexOf(e,t)},t.map=function(e,n){return dojo.map(t.makeArray(e||[]),n)},t.extend=function(e){if(e===!0){var n=t.makeArray(arguments);return n.shift(),dojo.mixin.apply(dojo,n)}return dojo.mixin.apply(dojo,arguments)},t.isEmptyObject=function(t){var e;for(e in t)break;return void 0===e},t.param=function(e){var n=[],r=function(t,e){n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))};for(var i in e)t.buildParam(i,e[i],r);return n.join("&").replace(/%20/g,"+")},t.buildParam=function(e,n,r){if(t.isArray(n))for(var i=0,o=n.length;o>i;++i)r(e+"[]",n[i]);else if(dojo.isObject(n))for(var a in n)t.buildParam(e+"["+a+"]",n[a],r);else r(e,n)},t.proxy=function(t,e){return dojo.hitch(e,t)},t.isFunction=function(t){return dojo.isFunction(t)};var r=0,i=function(e,n,i){e.forEach(function(e){e=new dojo.NodeList("SELECT"===e.nodeName?[e]:e);var o=t.data(e,"events");o||t.data(e,"events",o={}),o[n]||(o[n]={}),void 0===i.__bindingsIds&&(i.__bindingsIds=r++),o[n][i.__bindingsIds]=e.on(n,i)[0]})},o=function(e,n,r){e.forEach(function(e){var e=new dojo.NodeList(e),i=t.data(e,"events"),o=i[n],a=o[r.__bindingsIds];dojo.disconnect(a),delete o[r.__bindingsIds],t.isEmptyObject(o)&&delete i[n]})};t.bind=function(e,n){return this.bind&&this.bind!==t.bind?this.bind(e,n):this.on||this.nodeType?i(new dojo.NodeList("SELECT"===this.nodeName?[this]:this),e,n):this.addEvent?this.addEvent(e,n):t.addEvent.call(this,e,n),this},t.unbind=function(e,n){return this.unbind&&this.unbind!==t.unbind?this.unbind(e,n):this.on||this.nodeType?o(new dojo.NodeList(this),e,n):t.removeEvent.call(this,e,n),this},t.on=t.bind,t.off=t.unbind,t.trigger=function(e,n,r,i){if(e instanceof dojo.NodeList||!e.nodeName&&e!==window||(e=t.$(e)),e.trigger)if(i===!1){if(!e[0]||3===e[0].nodeType)return;var o=e.on(n,function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t._stopper&&t._stopper(),dojo.disconnect(o)});e.trigger(n,r)}else e.trigger(n,r);else"string"==typeof n&&(n={type:n}),n.data=r,n.target=n.target||e,t.dispatch.call(e,n)},t.delegate=function(t,e,n){return this.on||this.nodeType?i(new dojo.NodeList(this),t+":"+e,n):this.delegate&&this.delegate(t,e,n),this},t.undelegate=function(t,e,n){return this.on||this.nodeType?o(new dojo.NodeList(this),t+":"+e,n):this.undelegate&&this.undelegate(t,e,n),this};var a=function(t,e){for(var n in t)e[n]="function"==typeof e[n]?function(){t[n].apply(t,arguments)}:n[t]};t.ajax=function(e){var n=t.capitalize((e.type||"get").toLowerCase()),r=dojo["xhr"+n],i=e.success,o=e.error,s=new t.Deferred,u=r({url:e.url,handleAs:e.dataType,sync:!e.async,headers:e.headers,content:e.data});u.then(function(t){a(l,s),s.resolve(t,"success",l),i&&i(t,"success",l)},function(){a(l,s),s.reject(l,"error"),o(l,"error")});var l=u.ioArgs.xhr;return a(l,s),s},t.$=function(t){return t===window?window:"string"==typeof t?dojo.query(t):new dojo.NodeList(t)},t.append=function(t,e){return t.forEach(function(t){dojo.place(e,t)})};var s={},u=t.uuid=+new Date,l=t.expando="can"+u,c=function(e){t.trigger(new dojo.NodeList(e),"removed",[],!1);for(var n,r=0;void 0!==(n=e[r]);r++){var i=n[l];delete s[i]}};t.data=function(t,r,i){return void 0===i?0==t.length?void 0:e(t[0],r):t.forEach(function(t){n(t,r,i)})},dojo.empty,dojo.empty=function(){for(var t;t=node.lastChild;)dojo.destroy(t)};var p=dojo.destroy;dojo.destroy=function(e){e=dojo.byId(e);var n=[e];return e.getElementsByTagName&&n.concat(t.makeArray(e.getElementsByTagName("*"))),c(n),p.apply(dojo,arguments)};var d=dojo.place;return dojo.place=function(e,n,r){"string"==typeof e&&/^\s*</.test(e)&&(e=t.buildFragment(e));var i;i=11===e.nodeType?t.makeArray(e.childNodes):[e];var o=d.call(this,e,n,r);return t.inserted(i),o},t.addClass=function(t,e){return t.addClass(e)},t.remove=function(e){var n=[];return e.forEach(function(e){n.push(e),e.getElementsByTagName&&n.push.apply(n,t.makeArray(e.getElementsByTagName("*")))}),c(n),e.forEach(p),e},t.get=function(t,e){return t[e]},t.has=function(t,e){return dojo.isDescendant(e,t[0])?t:[]},t.extend(dojo.Deferred.prototype,{pipe:function(t,e){var n=new dojo.Deferred;return this.addCallback(function(){n.resolve(t.apply(this,arguments))}),this.addErrback(function(){e?n.reject(e.apply(this,arguments)):n.reject.apply(n,arguments)}),n}}),t});